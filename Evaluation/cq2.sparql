PREFIX etype: <http://knowdive.disi.unitn.it/etype#>
PREFIX omgeo: <http://www.ontotext.com/owlim/geo#>

SELECT ?name ?leisure ?sportName ?distance ?openingHours WHERE {
    BIND("Patrick" AS ?queryName)
    
    ?user etype:name_GID-2 ?userName .
    ?user etype:latitude_GID-46263 ?userLat .
    ?user etype:longitude_GID-46270 ?userLon .
    ?user etype:interest_GID-2206 ?userSportInterest .
    
    ?facility etype:leisure_GID-13017 ?leisure .
    ?facility etype:name_GID-2 ?name .
    ?facility etype:latitude_GID-46263 ?facilityLat .
    ?facility etype:longitude_GID-46270 ?facilityLon .
    ?facility etype:has_sport_GID-13036 ?sport .
    ?facility etype:opening_hours_GID-13023 ?openingHours .
    ?sport etype:type_of_sport_GID-13028 ?sportName .

	FILTER(?userName = ?queryName)
    FILTER(?sportName = ?userSportInterest)
	
    BIND(omgeo:distance(?userLat, ?userLon, ?facilityLat, ?facilityLon) AS ?distance)
}
ORDER BY ASC(?distance)
LIMIT 2